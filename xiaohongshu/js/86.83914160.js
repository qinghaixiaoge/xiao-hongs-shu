(self["webpackChunkxiaohongshu"]=self["webpackChunkxiaohongshu"]||[]).push([[86],{5390:function(t,e,a){"use strict";function n(t=2e3){return new Promise((e=>{setTimeout((()=>{e()}),t)}))}async function s(t){return await n(),new Array(t).fill(0).map((t=>{const e=Math.floor(11*Math.random())+1;return{id:0,isVideo:Math.random()>=.5?0:1,imageUrl:a(8857)(`./${e}.jpg`),content:e%2!=0?"我们这么拼":"走出第一步，下一步就变得简单。想做的事，就在今天做吧，不要让未来的自己遗憾。",avatar:a(8857)(`./${e}.jpg`),author:`Xiao_Yu${e}`,likeCount:Math.floor(1e3*Math.random())}}))}a.d(e,{b:function(){return s}})},3529:function(t,e,a){"use strict";function n(t,e=2){const a=t.children,n=window.innerWidth,s=.015*n,i=(n-(e+1)*s)/e,o=new Array(e).fill(0);for(let r=0;r<a.length;r++){const t=Math.min.apply(null,o),e=o.indexOf(t),n=(e+1)*s+e*i;a[r].style.width=i+"px",a[r].style.transform=`translate(${n}px,${t}px)`,o[e]+=s+a[r].offsetHeight}const l=Math.max.apply(null,o);t.style.height=l+s+"px"}a.d(e,{z:function(){return n}})},2086:function(t,e,a){"use strict";a.r(e),a.d(e,{default:function(){return R}});a(4114);var n=a(6768),s=a(5130),i=a(4232);const o={class:"minicard-container"},l={class:"card-top"},r={key:0,class:"card-tri-bg"},c=["src"],u={class:"card-title"},d={class:"card-bottom"},p={class:"card-left"},v=["src"],g={class:"card-name"},f={class:"card-right"},h={key:0,class:"card-like"},m={key:1,class:"card-like"};var k={__name:"MiniCard",props:["data"],emits:["loadImage"],setup(t,{emit:e}){const a=e;return(e,s)=>((0,n.uX)(),(0,n.CE)("div",o,[(0,n.Lk)("div",l,[t.data.isVideo?((0,n.uX)(),(0,n.CE)("div",r,s[1]||(s[1]=[(0,n.Lk)("svg",{viewBox:"-70 -50 200 300",class:"card-svg"},[(0,n.Lk)("polygon",{class:"card-tri","storke-linejoin":"round",points:"0,0 0,200 170,100"})],-1)]))):(0,n.Q3)("",!0),(0,n.Lk)("img",{src:t.data.imageUrl,class:"card-source"},null,8,c)]),(0,n.Lk)("div",u,(0,i.v_)(t.data.content),1),(0,n.Lk)("div",d,[(0,n.Lk)("div",p,[(0,n.Lk)("img",{src:t.data.avatar,class:"card-hard",onLoad:s[0]||(s[0]=t=>a("loadImage"))},null,40,v),(0,n.Lk)("div",g,(0,i.v_)(t.data.author),1)]),(0,n.Lk)("div",f,[s[2]||(s[2]=(0,n.Lk)("i",{class:"iconfont icon-aixin"},null,-1)),t.data.likeCount?((0,n.uX)(),(0,n.CE)("p",h,(0,i.v_)(t.data.likeCount),1)):((0,n.uX)(),(0,n.CE)("p",m,"赞"))])])]))}},y=a(1241);const j=(0,y.A)(k,[["__scopeId","data-v-3656f63b"]]);var x=j,L=a(5390),w=a(3529),_=a(144);const b={class:"outer"},E={class:"more-loading"};var C={__name:"index",setup(t){const e=(0,_.KR)([]),a=(0,_.KR)(null);let i=0;const o=(0,_.KR)(null),l=(0,_.KR)(null),r=(0,_.KR)(!1),c=async()=>{i=0,l.value.style.height="80px",l.value.style.transition="all 0.5s linear";const t=await(0,L.b)(10);e.value.splice(0,t.length),(0,n.dY)((()=>{e.value=t,console.log(l.value),l.value.style.height="0",l.value.style.transition="all 0.2s linear",setTimeout((()=>{l.value.style.transition="none"}),200)}))},u=()=>{i++,i===e.value.length&&(0,w.z)(a.value)},d=()=>{(0,w.z)(a.value)};return(0,n.sV)((()=>{c();const t=()=>0===o.value.scrollTop;let n,s,i=!1;a.value.addEventListener("touchstart",(function(e){t()&&!i&&(n=e.touches[0].pageY,s=!0)})),a.value.addEventListener("touchmove",(function(t){if(!i){const e=t.touches[0].pageY-n;s&&e>0&&(t.preventDefault(),l.value.style.height=e<80?`${e}px`:"80px")}}),{passive:!1}),a.value.addEventListener("touchend",(async function(t){if(s&&!i){const t=l.value.offsetHeight;t>=80?(i=!0,await c(),s=!1,i=!1,o.value.scrollTop=0):(l.value.style.height="0",l.value.style.transition="all 0.2s linear",setTimeout((()=>{l.value.style.transition="none"}),200))}}));const u=async()=>{const t=await(0,L.b)(10);e.value.push(...t)};let p;o.value.addEventListener("scroll",(async function(t){const e=this.scrollTop,a=this.scrollHeight,n=this.clientHeight;Math.ceil(e+n)>=a&&!r.value&&p!==a&&(console.log("触底"),p=a,r.value=!0,await u(),r.value=!1)})),window.addEventListener("resize",d)})),(0,n.hi)((()=>{window.removeEventListener("resize",d)})),(t,i)=>((0,n.uX)(),(0,n.CE)("div",{class:"message-container",ref_key:"messageRef",ref:o},[(0,n.Lk)("div",b,[(0,n.Lk)("div",{class:"loading",ref_key:"loadRef",ref:l},i[0]||(i[0]=[(0,n.Lk)("i",{class:"iconfont icon-jiazai"},null,-1)]),512),(0,n.Lk)("div",{class:"cards-container",ref_key:"cardsRef",ref:a},[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(e.value,((t,e)=>((0,n.uX)(),(0,n.Wv)(x,{data:t,onLoadImage:u,key:e},null,8,["data"])))),128))],512),(0,n.bo)((0,n.Lk)("div",E,i[1]||(i[1]=[(0,n.Lk)("i",{class:"iconfont icon-jiazai"},null,-1)]),512),[[s.aG,r.value]])])],512))}};const M=(0,y.A)(C,[["__scopeId","data-v-5e1e1116"]]);var R=M},8857:function(t,e,a){var n={"./1.jpg":9133,"./10.jpg":4673,"./11.jpg":6628,"./2.jpg":6994,"./3.jpg":6991,"./4.jpg":5028,"./5.jpg":3553,"./6.jpg":5782,"./7.jpg":6835,"./8.jpg":4104,"./9.jpg":5013};function s(t){var e=i(t);return a(e)}function i(t){if(!a.o(n,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return n[t]}s.keys=function(){return Object.keys(n)},s.resolve=i,t.exports=s,s.id=8857},9133:function(t,e,a){"use strict";t.exports=a.p+"img/1.450590d7.jpg"},4673:function(t,e,a){"use strict";t.exports=a.p+"img/10.c7310e28.jpg"},6628:function(t,e,a){"use strict";t.exports=a.p+"img/11.c925abad.jpg"},6994:function(t,e,a){"use strict";t.exports=a.p+"img/2.d503ad20.jpg"},6991:function(t,e,a){"use strict";t.exports=a.p+"img/3.2bb7f994.jpg"},5028:function(t,e,a){"use strict";t.exports=a.p+"img/4.bc08485c.jpg"},3553:function(t,e,a){"use strict";t.exports=a.p+"img/5.599f86d0.jpg"},5782:function(t,e,a){"use strict";t.exports=a.p+"img/6.78ed8939.jpg"},6835:function(t,e,a){"use strict";t.exports=a.p+"img/7.96dbcea5.jpg"},4104:function(t,e,a){"use strict";t.exports=a.p+"img/8.e129b253.jpg"},5013:function(t,e,a){"use strict";t.exports=a.p+"img/9.19451466.jpg"}}]);